[{"/app/src/index.js":"1","/app/src/serviceWorker.js":"2","/app/src/App.js":"3","/app/src/app/store.js":"4","/app/src/firebase.js":"5","/app/src/pages/OrdersPage.js":"6","/app/src/pages/LoginPage.js":"7","/app/src/pages/HomePage.js":"8","/app/src/pages/CartPage.js":"9","/app/src/pages/ProductPage.js":"10","/app/src/features/products/productsSlice.js":"11","/app/src/features/user/userSlice.js":"12","/app/src/components/Stars.js":"13","/app/src/components/Navbar.js":"14","/app/src/components/CartProduct.js":"15","/app/src/components/ProductsList.js":"16","/app/src/components/Payment.js":"17","/app/src/components/Product.js":"18","/app/src/components/CheckoutForm.js":"19"},{"size":740,"mtime":1611111997082,"results":"20","hashOfConfig":"21"},{"size":5141,"mtime":1602634938373,"results":"22","hashOfConfig":"21"},{"size":1240,"mtime":1611966201477,"results":"23","hashOfConfig":"21"},{"size":290,"mtime":1611789734613,"results":"24","hashOfConfig":"21"},{"size":768,"mtime":1611881996950,"results":"25","hashOfConfig":"21"},{"size":1360,"mtime":1612232933155,"results":"26","hashOfConfig":"21"},{"size":1203,"mtime":1611888140101,"results":"27","hashOfConfig":"21"},{"size":479,"mtime":1611886331532,"results":"28","hashOfConfig":"21"},{"size":1082,"mtime":1612225073074,"results":"29","hashOfConfig":"21"},{"size":7585,"mtime":1612331057095,"results":"30","hashOfConfig":"21"},{"size":1626,"mtime":1612230527236,"results":"31","hashOfConfig":"21"},{"size":1529,"mtime":1611886463289,"results":"32","hashOfConfig":"21"},{"size":997,"mtime":1612224710786,"results":"33","hashOfConfig":"21"},{"size":1153,"mtime":1611903535575,"results":"34","hashOfConfig":"21"},{"size":784,"mtime":1612331532533,"results":"35","hashOfConfig":"21"},{"size":1014,"mtime":1611965802812,"results":"36","hashOfConfig":"21"},{"size":527,"mtime":1611114135685,"results":"37","hashOfConfig":"21"},{"size":803,"mtime":1612138816976,"results":"38","hashOfConfig":"21"},{"size":3995,"mtime":1611901004725,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"c0w68h",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"42"},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"42"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"73","usedDeprecatedRules":"42"},{"filePath":"74","messages":"75","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"76","usedDeprecatedRules":"42"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"81","usedDeprecatedRules":"42"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"84"},"/app/src/index.js",[],["85","86"],"/app/src/serviceWorker.js",[],"/app/src/App.js",["87","88","89"],"import \"./App.scss\";\r\nimport { Switch, Route } from \"react-router-dom\";\r\nimport HomePage from \"./pages/HomePage\";\r\nimport LoginPage from \"./pages/LoginPage\";\r\nimport CartPage from \"./pages/CartPage\";\r\nimport OrdersPage from \"./pages/OrdersPage\";\r\nimport ProductPage from \"./pages/ProductPage\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectUser, setUser } from \"./features/user/userSlice\";\r\nimport { auth } from \"./firebase\";\r\nimport { useEffect } from \"react\";\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        const { uid, displayName, email, photoURL } = user;\r\n        dispatch(setUser({ uid, displayName, email, photoURL }));\r\n      } else {\r\n        dispatch(setUser(null));\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"app\">\r\n      <Switch>\r\n        <Route path=\"/\" component={HomePage} exact />\r\n        <Route path=\"/login\" component={LoginPage} />\r\n        <Route path=\"/product/:id\" component={ProductPage} />\r\n        <Route path=\"/cart\" component={CartPage} />\r\n        <Route path=\"/orders\" component={OrdersPage} />\r\n      </Switch>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","/app/src/app/store.js",[],"/app/src/firebase.js",[],"/app/src/pages/OrdersPage.js",[],"/app/src/pages/LoginPage.js",[],"/app/src/pages/HomePage.js",["90","91","92","93"],"import { useDispatch, useSelector } from \"react-redux\";\r\nimport Navbar from \"../components/Navbar\";\r\nimport ProductsList from \"../components/ProductsList\";\r\nimport { googleLogin, selectUser, setUser } from \"../features/user/userSlice\";\r\n\r\nconst HomePage = () => {\r\n  const user = useSelector(selectUser);\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"homePage\">\r\n      <Navbar />\r\n      <ProductsList />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HomePage;\r\n","/app/src/pages/CartPage.js",[],"/app/src/pages/ProductPage.js",[],"/app/src/features/products/productsSlice.js",[],"/app/src/features/user/userSlice.js",[],"/app/src/components/Stars.js",[],"/app/src/components/Navbar.js",[],"/app/src/components/CartProduct.js",["94"],"import \"./CartProduct.scss\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { removeFromCart } from \"../features/products/productsSlice\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst CartProduct = ({ id, name, price, image, index }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"cartProduct\">\r\n      <div\r\n        className=\"cartProduct__image\"\r\n        style={{ backgroundImage: `url(${image})`, marginRight: 20 }}\r\n      ></div>\r\n      <div className=\"cartProduct__info\">\r\n        <h1>{name}</h1>\r\n        <p style={{ color: \"green\", fontWeight: \"bold\" }}>In Stock</p>\r\n      </div>\r\n      <h2>${price / 100}</h2>\r\n      <button onClick={() => dispatch(removeFromCart(index))}>X</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CartProduct;\r\n","/app/src/components/ProductsList.js",["95"],"import { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  getProducts,\r\n  selectProducts,\r\n} from \"../features/products/productsSlice\";\r\nimport { Product } from \"./Product\";\r\nimport \"./ProductsList.scss\";\r\n\r\nconst ProductsList = () => {\r\n  const products = useSelector(selectProducts);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    dispatch(getProducts());\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"productsList\">\r\n      <div className=\"container\">\r\n        {products?.map(\r\n          ({ _id, name, stars, price, discountedPrice, image, options }) => (\r\n            <Product\r\n              key={_id}\r\n              id={_id}\r\n              name={name}\r\n              stars={stars}\r\n              price={options[0]?.price}\r\n              discountedPrice={options[0]?.discountedPrice}\r\n              image={options[0]?.images[0]?.preview}\r\n            />\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductsList;\r\n","/app/src/components/Payment.js",[],"/app/src/components/Product.js",["96","97"],"import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addToCart } from \"../features/products/productsSlice\";\r\nimport \"./Product.scss\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Stars from \"./Stars\";\r\n\r\nexport const Product = ({ id, name, stars, price, discountedPrice, image }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <Link to={`/product/${id}`} className=\"product\">\r\n      <div\r\n        className=\"product__image\"\r\n        style={{ backgroundImage: `url(${image})` }}\r\n      ></div>\r\n      <h2 style={{ marginBottom: 4 }} className=\"product__name\">\r\n        {name}\r\n      </h2>\r\n      <Stars value={stars} />\r\n      <p className=\"product__price\">\r\n        {discountedPrice / 100}€<span>{price / 100}€</span>\r\n      </p>\r\n    </Link>\r\n  );\r\n};\r\n","/app/src/components/CheckoutForm.js",["98"],"import React, { useState, useEffect } from \"react\";\r\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { selectCart } from \"../features/products/productsSlice\";\r\nimport { selectUser } from \"../features/user/userSlice\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\n\r\nconst CheckoutForm = () => {\r\n  const [succeeded, setSucceeded] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [processing, setProcessing] = useState(\"\");\r\n  const [disabled, setDisabled] = useState(true);\r\n  const [clientSecret, setClientSecret] = useState(\"\");\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  let history = useHistory();\r\n  const user = useSelector(selectUser);\r\n  const cart = useSelector(selectCart);\r\n\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    if (cart.length > 0) {\r\n      window\r\n        .fetch(\"http://localhost:5000/create-payment-intent\", {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ uid: user.uid, cart: cart }),\r\n        })\r\n        .then((res) => {\r\n          return res.json();\r\n        })\r\n        .then((data) => {\r\n          console.log(data);\r\n          setTotal(data.total);\r\n          setClientSecret(data.clientSecret);\r\n        });\r\n    } else {\r\n      console.log(\"EMPTY CART\");\r\n    }\r\n  }, [cart]);\r\n\r\n  const cardStyle = {\r\n    style: {\r\n      base: {\r\n        color: \"#32325d\",\r\n        fontFamily: \"Arial, sans-serif\",\r\n        fontSmoothing: \"antialiased\",\r\n        fontSize: \"16px\",\r\n        \"::placeholder\": {\r\n          color: \"#32325d\",\r\n        },\r\n      },\r\n      invalid: {\r\n        color: \"#fa755a\",\r\n        iconColor: \"#fa755a\",\r\n      },\r\n    },\r\n  };\r\n\r\n  const handleChange = async (event) => {\r\n    // Listen for changes in the CardElement\r\n    // and display any errors as the customer types their card details\r\n    setDisabled(event.empty);\r\n    setError(event.error ? event.error.message : \"\");\r\n  };\r\n  const handleSubmit = async (ev) => {\r\n    ev.preventDefault();\r\n    setProcessing(true);\r\n    const payload = await stripe.confirmCardPayment(clientSecret, {\r\n      payment_method: {\r\n        card: elements.getElement(CardElement),\r\n      },\r\n    });\r\n    if (payload.error) {\r\n      setError(`Payment failed ${payload.error.message}`);\r\n      setProcessing(false);\r\n    } else {\r\n      setError(null);\r\n      setProcessing(false);\r\n      setSucceeded(true);\r\n      console.log(\"RICHIESTA OK\", succeeded);\r\n      Axios.post(\"http://localhost:5000/complete-payment\", {\r\n        uid: user.uid,\r\n        cart: cart,\r\n      }).then((response) => {\r\n        console.log(response);\r\n      });\r\n      history.push(\"/orders\");\r\n    }\r\n  };\r\n  return (\r\n    <form id=\"payment-form\" onSubmit={handleSubmit}>\r\n      <h1 style={{ paddingBottom: 10 }}>\r\n        {total ? total / 100 + \"$\" : \"Loading...\"}\r\n      </h1>\r\n      <CardElement\r\n        id=\"card-element\"\r\n        onChange={handleChange}\r\n        options={cardStyle}\r\n      />\r\n      <button disabled={processing || disabled || succeeded} id=\"submit\">\r\n        <span id=\"button-text\">\r\n          {processing ? <div className=\"spinner\" id=\"spinner\"></div> : \"Pay\"}\r\n        </span>\r\n      </button>\r\n      {/* Show any error that happens when processing the payment */}\r\n      {error && (\r\n        <div className=\"card-error\" role=\"alert\">\r\n          {error}\r\n        </div>\r\n      )}\r\n      {/* Show a success message upon completion */}\r\n      {succeeded ? (\r\n        <p>\r\n          Payment succeeded, see the result in your\r\n          <a href={`https://dashboard.stripe.com/test/payments`}>\r\n            {\" \"}\r\n            Stripe dashboard.\r\n          </a>{\" \"}\r\n          Refresh the page to pay again.\r\n        </p>\r\n      ) : (\r\n        <h1>Loading</h1>\r\n      )}\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CheckoutForm;\r\n",{"ruleId":"99","replacedBy":"100"},{"ruleId":"101","replacedBy":"102"},{"ruleId":"103","severity":1,"message":"104","line":8,"column":23,"nodeType":"105","messageId":"106","endLine":8,"endColumn":34},{"ruleId":"103","severity":1,"message":"107","line":9,"column":10,"nodeType":"105","messageId":"106","endLine":9,"endColumn":20},{"ruleId":"108","severity":1,"message":"109","line":25,"column":6,"nodeType":"110","endLine":25,"endColumn":8,"suggestions":"111"},{"ruleId":"103","severity":1,"message":"112","line":4,"column":10,"nodeType":"105","messageId":"106","endLine":4,"endColumn":21},{"ruleId":"103","severity":1,"message":"113","line":4,"column":35,"nodeType":"105","messageId":"106","endLine":4,"endColumn":42},{"ruleId":"103","severity":1,"message":"114","line":7,"column":9,"nodeType":"105","messageId":"106","endLine":7,"endColumn":13},{"ruleId":"103","severity":1,"message":"115","line":8,"column":9,"nodeType":"105","messageId":"106","endLine":8,"endColumn":17},{"ruleId":"103","severity":1,"message":"116","line":4,"column":10,"nodeType":"105","messageId":"106","endLine":4,"endColumn":14},{"ruleId":"108","severity":1,"message":"109","line":16,"column":6,"nodeType":"110","endLine":16,"endColumn":8,"suggestions":"117"},{"ruleId":"103","severity":1,"message":"118","line":3,"column":10,"nodeType":"105","messageId":"106","endLine":3,"endColumn":19},{"ruleId":"103","severity":1,"message":"115","line":9,"column":9,"nodeType":"105","messageId":"106","endLine":9,"endColumn":17},{"ruleId":"108","severity":1,"message":"119","line":44,"column":6,"nodeType":"110","endLine":44,"endColumn":12,"suggestions":"120"},"no-native-reassign",["121"],"no-negated-in-lhs",["122"],"no-unused-vars","'useSelector' is defined but never used.","Identifier","unusedVar","'selectUser' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'dispatch'. Either include it or remove the dependency array.","ArrayExpression",["123"],"'googleLogin' is defined but never used.","'setUser' is defined but never used.","'user' is assigned a value but never used.","'dispatch' is assigned a value but never used.","'Link' is defined but never used.",["124"],"'addToCart' is defined but never used.","React Hook useEffect has a missing dependency: 'user.uid'. Either include it or remove the dependency array.",["125"],"no-global-assign","no-unsafe-negation",{"desc":"126","fix":"127"},{"desc":"126","fix":"128"},{"desc":"129","fix":"130"},"Update the dependencies array to be: [dispatch]",{"range":"131","text":"132"},{"range":"133","text":"132"},"Update the dependencies array to be: [cart, user.uid]",{"range":"134","text":"135"},[832,834],"[dispatch]",[427,429],[1488,1494],"[cart, user.uid]"]